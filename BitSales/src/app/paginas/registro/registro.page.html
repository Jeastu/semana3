<ion-content [fullscreen]="true">
  <div class="registro-container">
    <ion-card>
      <ion-card-header>
        <ion-card-title>Crear Cuenta</ion-card-title>
      </ion-card-header>

      <ion-card-content>
        <form [formGroup]="registroForm" (ngSubmit)="registrar()" style="display: flex; flex-direction: column; align-items: center;">
          
          <ion-item>
            <ion-input formControlName="usuario" placeholder="Nombre de usuario" required></ion-input>
          </ion-item>

          <ion-item>
  <ion-input type="email" formControlName="correo" placeholder="Correo" required></ion-input>
</ion-item>
<ion-text color="danger" *ngIf="registroForm.get('correo')?.invalid && registroForm.get('correo')?.touched">
  <small>Correo inválido</small>
</ion-text>

          <ion-item>
  <ion-input type="password" formControlName="contrasena" placeholder="Contraseña" required></ion-input>
</ion-item>
<ion-text color="danger" *ngIf="registroForm.get('contrasena')?.errors?.['minlength'] && registroForm.get('contrasena')?.touched">
  <small>La contraseña debe tener al menos 4 caracteres</small>
</ion-text>


          <ion-item>
  <ion-input type="password" formControlName="confirmar" placeholder="Confirmar contraseña" required></ion-input>
</ion-item>
<ion-text color="danger" *ngIf="registroForm.hasError('noCoinciden') && registroForm.get('confirmar')?.touched">
  <small>Las contraseñas no coinciden</small>
</ion-text>

          <ion-item>
            <ion-input formControlName="direccion" placeholder="Dirección" required></ion-input>
          </ion-item>

          <!-- ✅ Campo de fecha MATERIAL fuera de ion-item -->
          <div class="material-datepicker">
  <mat-form-field appearance="fill">
    <mat-label>Fecha de nacimiento</mat-label>
    <input matInput [matDatepicker]="picker" formControlName="fechaNacimiento">
    <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
    <mat-datepicker #picker></mat-datepicker>
  </mat-form-field>
</div>
<ion-text color="danger" *ngIf="edadInvalida">
  <small>Debes tener al menos 18 años</small>
</ion-text>


          <ion-button expand="block" type="submit">Crear cuenta</ion-button>
          <ion-button expand="block" fill="clear" (click)="volver()">Volver al login</ion-button>
        </form>
      </ion-card-content>
    </ion-card>
  </div>
</ion-content>
